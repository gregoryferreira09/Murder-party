<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Création de scénario</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Cormorant Garamond', serif;
      background-color: #000;
      color: #f4e4c1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      margin: 0;
      text-align: center;
      scroll-behavior: smooth;
    }

    /* Styles internes précédents conservés */
    .form-container {
      background: #222;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 20px #0b6217;
      max-width: 400px;
      width: 90%;
      margin-top: 40px;
      border: 3px solid #c6b579;
    }

    label {
      display: block;
      margin: 15px 0 6px;
      font-weight: bold;
      color: #c6b579;
    }

    select, input[type="text"], input[type="number"] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: #111;
      color: #eee;
      font-size: 16px;
    }

    input[type="checkbox"] {
      margin-right: 10px;
      cursor: pointer;
      transform: scale(1.2);
      vertical-align: middle;
    }

    button {
      margin-top: 20px;
      padding: 12px 25px;
      background: linear-gradient(45deg, #1fae3e, #0b6217);
      border: none;
      border-radius: 12px;
      color: #eee;
      font-size: 18px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: linear-gradient(45deg, #0b6217, #1fae3e);
    }

    #periodeAutreContainer {
      margin-top: 12px;
    }

    #btnRetourAccueil {
      margin-top: 25px;
      background: #444;
      color: #c6b579;
      border: 2px solid #c6b579;
      font-size: 16px;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
    }

    #btnRetourAccueil:hover {
      background: #c6b579;
      color: #222;
    }
  </style>
</head>
<body>
  <h1>Création de scénario de murder party</h1>

  <div class="form-container">
    <form id="formScenario">
      <label for="mode">Mode de jeu :</label>
      <select id="mode" name="mode" required>
        <option value="classique">Classique</option>
        <option value="poison">Poison aléatoire</option>
        <option value="chasse">Chasse au juste coupable</option>
        <option value="mjlive">MJ live</option>
      </select>

      <label for="duree">Durée (en jours) :</label>
      <input type="number" id="duree" name="duree" min="1" max="10" value="3" required />

      <label for="periode">Période :</label>
      <select id="periode" name="periode" required>
        <option value="medieval">Médiéval</option>
        <option value="antiquite">Antiquité</option>
        <option value="renaissance">Renaissance</option>
        <option value="contemporain">Contemporain</option>
        <option value="futuriste">Futuriste</option>
        <option value="autre">Autre</option>
      </select>

      <div id="periodeAutreContainer" style="display:none;">
        <label for="periodeAutre">Précisez la période :</label>
        <input type="text" id="periodeAutre" name="periodeAutre" placeholder="Ex : Steampunk" />
      </div>

      <label for="criminels">Nombre de criminels :</label>
      <input type="number" id="criminels" name="criminels" min="1" max="3" value="1" required />

      <label><input type="checkbox" id="criminelFantome" name="criminelFantome" /> Criminel fantôme (ils ne se connaissent pas au début)</label>

      <label><input type="checkbox" id="avatarsLegendaires" name="avatarsLegendaires" /> Activer avatars légendaires</label>

      <label for="nombreJoueurs">Nombre de joueurs :</label>
      <input type="number" id="nombreJoueurs" name="nombreJoueurs" min="4" max="15" value="6" required />

      <button type="submit">Générer scénario</button>
    </form>
    <button id="btnRetourAccueil">Retour à l'accueil</button>
  </div>

  <script>
    const periodeSelect = document.getElementById('periode');
    const periodeAutreContainer = document.getElementById('periodeAutreContainer');

    periodeSelect.addEventListener('change', () => {
      if (periodeSelect.value === 'autre') {
        periodeAutreContainer.style.display = 'block';
      } else {
        periodeAutreContainer.style.display = 'none';
      }
    });

    const form = document.getElementById('formScenario');
    const btnRetourAccueil = document.getElementById('btnRetourAccueil');

    btnRetourAccueil.addEventListener('click', () => {
      window.location.href = "index.html"; // Modifier selon ta page d'accueil
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const mode = form.mode.value;
      const duree = parseInt(form.duree.value);
      const periode = form.periode.value;
      const periodeAutre = form.periodeAutre.value.trim();
      const criminels = parseInt(form.criminels.value);
      const criminelFantome = form.criminelFantome.checked;
      const avatarsLegendaires = form.avatarsLegendaires.checked;
      const nombreJoueurs = parseInt(form.nombreJoueurs.value);

      const scenario = genererScenario({mode, duree, periode, periodeAutre, criminels, criminelFantome, avatarsLegendaires, nombreJoueurs});
      localStorage.setItem('scenarioMurderParty', JSON.stringify(scenario));

      window.location.href = "lancement.html"; // Modifier selon ta page de lancement
    });

    function genererScenario({mode, duree, periode, periodeAutre, criminels, criminelFantome, avatarsLegendaires, nombreJoueurs}) {
      let introduction = "";
      let crime = "";
      let objectifGlobal = "Résoudre le mystère et découvrir le ou les coupables.";

      if (periode === "medieval") { 
        introduction = `Au cœur du Moyen-Âge, dans une forteresse ancestrale, une disparition inquiétante a été signalée.`; 
        crime = `Le seigneur du château a été retrouvé sans vie.`; 
      } else if (periode === "antiquite") { 
        introduction = `Dans la cité antique, sous le regard des dieux, un meurtre sacrilège vient d'être commis.`; 
        crime = `Un prêtre a été assassiné dans le temple.`; 
      } else if (periode === "renaissance") { 
        introduction = `À la Renaissance, l'art et la science cachent aussi des drames humains.`; 
        crime = `Un peintre célèbre a été retrouvé mort dans son atelier.`; 
      } else if (periode === "contemporain") { 
        introduction = `Dans notre époque moderne, un mystère plane sur un groupe d'amis.`; 
        crime = `Un des membres du groupe a été retrouvé mort dans des circonstances suspectes.`; 
      } else if (periode === "futuriste") { 
        introduction = `Dans un futur lointain, où la technologie règne, un crime menace la paix.`; 
        crime = `Un scientifique a disparu mystérieusement.`; 
      } else if (periode === "autre") { 
        introduction = `Dans une période particulière (${periodeAutre}), un événement trouble la quiétude.`; 
        crime = `Un incident grave est survenu.`; 
      } 

      if (criminelFantome) { 
        introduction += ` Les criminels doivent se découvrir pendant la partie.`; 
      } 

      if (avatarsLegendaires) { 
        introduction += ` Des avatars légendaires avec des pouvoirs spéciaux sont activés.`; 
      } 

      return { 
        introduction: introduction + " " + crime, 
        objectifGlobal, 
        params: { mode, duree, periode, periodeAutre, criminels, criminelFantome, avatarsLegendaires, nombreJoueurs } 
      }; 
    }
  </script>
</body>
</html>
